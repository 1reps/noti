# ê°ì²´ ìƒì„±ê³¼ íŒŒê´´

- ìƒì„±ì ëŒ€ì‹  ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ê³ ë ¤í•˜ë¼
    
    í´ë˜ìŠ¤ëŠ” ìƒì„±ìì™€ ë³„ë„ë¡œ ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œ(static factory method)ë¥¼ ì œê³µí•  ìˆ˜ ìˆë‹¤.
    
    > ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œê°€ ìƒì„±ìë³´ë‹¤ ì¢‹ì€ ì¥ì  ë‹¤ì„¯ ê°€ì§€
    > 
    1. ì´ë¦„ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.
    2. í˜¸ì¶œë  ë•Œë§ˆë‹¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì§€ëŠ” ì•Šì•„ë„ ëœë‹¤.
    = Boolean.valueOf(boolean), í”Œë¼ì´ì›¨ì´íŠ¸ íŒ¨í„´(Flyweight Pattern)
    3. ë°˜í™˜ íƒ€ì…ì˜ í•˜ìœ„ íƒ€ì… ê°ì²´ë¥¼ ë°˜í™œí•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ ìˆë‹¤.
    = APIë¥¼ ë§Œë“¤ ë•Œ ì´ ìœ ì—°ì„±ì„ ì‘ìš©í•˜ë©´ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ê³µê°œí•˜ì§€ ì•Šê³ ë„ ê·¸ ê°ì²´ë¥¼ ë°˜í™œí•  ìˆ˜ ìˆì–´ APIë¥¼ ì‘ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
       ìë°” 8ë¶€í„°ëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ publicí•œ ì •ì  ë©¤ë²„ë¥¼ í—ˆìš©í•œë‹¤.
    4. ì…ë ¥ ë§¤ê°œë³€ìˆ˜ì— ë”°ë¼ ë§¤ë²ˆ ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.
    = ë°˜í™˜ íƒ€ì…ì˜ í•˜ìœ„ íƒ€ì…ì´ê¸°ë§Œ í•˜ë©´ ì–´ë–¤ í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ë°˜í™˜í•˜ë“  ìƒê´€ì—†ë‹¤.
    5. ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ì‘ì„±í•˜ëŠ” ì‹œì ì—ëŠ” ë°˜í™˜í•  ê°ì²´ì˜ í´ë˜ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
    = ì„œë¹„ìŠ¤ ì œê³µì ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ë‹¤ë©´ ê° êµ¬í˜„ì²´ë¥¼ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë§Œë“¤ ë•Œ ë¦¬í”Œë ‰ì…˜ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
       ìë°” 5ë¶€í„°ëŠ” java.util.ServiceLoaderë¼ëŠ” ë²”ìš© ì„œë¹„ìŠ¤ ì œê³µì í”„ë ˆì„ì›Œí¬ê°€ ì œê³µë˜ì–´ í”„ë ˆì„ì›Œí¬ë¥¼ ì§ì ‘ ë§Œë“¤ í•„ìš”ê°€ ê±°ì˜ ì—†ì–´ì¡Œë‹¤.
    
    > ë‹¨ì 
    > 
    1. ìƒì†ì„ í•˜ë ¤ë©´ publicì´ë‚˜ protected ìƒì„±ìê°€ í•„ìš”í•˜ë‹ˆ ì •ì  íŒ¨í„°ë¦¬ ë©”ì„œë“œë§Œ ì œê³µí•˜ë©´ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ë‹¤.
    2. ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ì°¾ê¸° ì–´ë µë‹¤.
    
    > ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œì— í”íˆ ì‚¬ìš©í•˜ëŠ” ëª…ëª… ë°©ì‹
    > 
    
    | from | ë§¤ê°œë³€ìˆ˜ë¥¼ í•˜ë‚˜ ë°›ì•„ì„œ í•´ë‹¹ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” í˜•ë³€í™˜ ë©”ì„œë“œ | Date d = Date.from(instance); |
    | --- | --- | --- |
    | of | ì—¬ëŸ¬ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì•„ ì í•©í•œ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ì§‘ê³„ ë©”ì„œë“œ | Set<Rank> faceCards = EnumSet.of(JACK, QUEEN, KING); |
    | valueOf | fromê³¼ ofì˜ ë” ìì„¸í•œ ë²„ì „ | BigInteger prime = BigInteger.valueOf(Integer.MAX_VALUE); |
    | instacne í˜¹ì€ getInstance | (ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤ë©´) ë§¤ê°œë³€ìˆ˜ë¡œ ëª…ì‹œí•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ì§€ë§Œ, ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì„ì„ ë³´ì¥í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤ | StackWalker luke = StackWalker.getInstance(options); |
    | create í˜¹ì€ newInstance | instance í˜¹ì€ getInstanceì™€ ê°™ì§€ë§Œ, ë§¤ë²ˆ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ ë°˜í™˜í•¨ì„ ë³´ì¥í•œë‹¤. | Object newArray = Array.newInstance(classObject, arrayLen); |
    | getType | getInstanceì™€ ê°™ìœ¼ë‚˜, ìƒì„±í•  í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í´ë˜ìŠ¤ì— íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ì •ì˜í•  ë•Œ ì“´ë‹¤. â€œTypeâ€ì€ íŒ©í„°ë¦¬ ë©”ì„œë“œê°€ ë°˜í™˜í•  ê°ì²´ì˜ íƒ€ì…ì´ë‹¤. | FileStore fs = Files.getFileStore(path) |
    | newType | newInstanceì™€ ê°™ìœ¼ë‚˜, ìƒì„±í•  í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í´ë˜ìŠ¤ì— íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ì •ì˜í•  ë•Œ ì“´ë‹¤. â€œTypeâ€ì€ íŒ©í„°ë¦¬ ë©”ì„œë“œê°€ ë°˜í™˜í•  ê°ì²´ì˜ íƒ€ì…ì´ë‹¤. | BufferedReader br = Files.newBufferedReader(path); |
    | type | getTypeê³¼ newTypeì˜ ê°„ê²°í•œ ë²„ì „ | List<Complaint> litany = Collections.list(legacyLitany); |
    
    <aside>
    ğŸ’¡ ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œì™€ public ìƒì„±ìëŠ” ê°ìì˜ ì“°ì„ìƒˆê°€ ìˆìœ¼ë‹ˆ ìƒëŒ€ì ì¸ ì¥ë‹¨ì ì„ ì´í•´í•˜ê³  ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
    ê·¸ë ‡ë‹¤ê³  í•˜ë”ë¼ë„ ì •ì  íŒ©í„°ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ìœ ë¦¬í•œ ê²½ìš°ê°€ ë” ë§ìœ¼ë¯€ë¡œ ë¬´ì‘ì • public ìƒì„±ìë¥¼ ì œê³µí•˜ë˜ ìŠµê´€ì´ ìˆë‹¤ë©´ ê³ ì¹˜ì.
    
    </aside>
    

---

- ìƒì„±ìì— ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë”ë¥¼ ê³ ë ¤í•˜ë¼
    
    ```java
    public class NutritionFacts {
        private final int servingSize;   // (ml, 1íšŒ ì œê³µëŸ‰)    í•„ìˆ˜
        private final int servings;      // (íšŒ, ì´ níšŒ ì œê³µëŸ‰) í•„ìˆ˜
        private final int calories;      // (1íšŒ ì œê³µëŸ‰ë‹¹)      ì„ íƒ
        private final int fat;           // (g/1íšŒ ì œê³µëŸ‰)      ì„ íƒ
        private final int sodium;        // (mg/1íšŒ ì œê³µëŸ‰)     ì„ íƒ
        private final int carbohydrate;  // (g/1íšŒ ì œê³µëŸ‰)      ì„ íƒ
    
        public NutritionFacts(int servingSize, int servings) {
            this(servingSize, servings, 0);
        }
    
        public NutritionFacts(int servingSize, int servings, int calories) {
            this(servingSize, servings, calories, 0);
        }
    
        public NutritionFacts(int servingSize, int servings, int calories, int fat) {
            this(servingSize, servings, calories, fat, 0);
        }
    
        public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium) {
            this(servingSize, servings, calories, fat, sodium, 0);
        }
    
        public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium, int carbohydrate) {
            this.servingSize  = servingSize;
            this.servings     = servings;
            this.calories     = calories;
            this.fat          = fat;
            this.sodium       = sodium;
            this.carbohydrate = carbohydrate;
        }
    
    }
    ```
    
    ```java
    NutitionFacts cocaCola = new NutritionFacts(240, 8, 100, 0, 35, 28);
    ```
    
    <aside>
    ğŸ’¡ ì ì¸µì  ìƒì„±ì íŒ¨í„´ë„ ì“¸ ìˆ˜ëŠ” ìˆì§€ë§Œ, ë§¤ê°œë³€ìˆ˜ ê°œìˆ˜ê°€ ë§ì•„ì§€ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê±°ë‚˜ ì½ê¸° ì–´ë µë‹¤.
    
    </aside>
    
    ---
    
    ì„ íƒ ë§¤ê°œë³€ìˆ˜ê°€ ë§ì„ ë•Œ í™œìš©í•  ìˆ˜ ìˆëŠ” ë‘ ë²ˆì§¸ ëŒ€ì•ˆì¸ ìë°”ë¹ˆì¦ˆ íŒ¨í„´
    
    ```java
    public class NutritionFactsJavaBeansPattern {
        // ë§¤ê°œë³€ìˆ˜ë“¤ì€ (ê¸°ë³¸ê°’ì´ ìˆë‹¤ë©´) ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ëœë‹¤.
        private int servingSize  = -1; // í•„ìˆ˜; ê¸°ë³¸ê°’ ì—†ìŒ
        private int servings     = -1; // í•„ìˆ˜; ê¸°ë³¸ê°’ ì—†ìŒ
        private int calories     =  0;
        private int fat          =  0;
        private int sodium       =  0;
        private int carbohydrate =  0;
    
        public NutritionFactsJavaBeansPattern() {
        }
        
        // ì„¸í„° ë©”ì„œë“œë“¤
        public void setServingSize(int servingSize) {
            this.servingSize = servingSize;
        }
    
        public void setServings(int servings) {
            this.servings = servings;
        }
    
        public void setCalories(int calories) {
            this.calories = calories;
        }
    
        public void setFat(int fat) {
            this.fat = fat;
        }
    
        public void setSodium(int sodium) {
            this.sodium = sodium;
        }
    
        public void setCarbohydrate(int carbohydrate) {
            this.carbohydrate = carbohydrate;
        }
        
    }
    ```
    
    ```java
    NutritionFactsJavaBeansPattern javaBeans = new NutritionFactsJavaBeansPattern();
    javaBeans.setServingSize(10);
    javaBeans.setServings(8);
    javaBeans.setCalories(100);
    javaBeans.setSodium(35);
    javaBeans.setCarbohydrate(27);
    ```
    
    <aside>
    ğŸ’¡ ìë°”ë¹ˆì¦ˆ íŒ¨í„´ì—ì„œëŠ” ê°ì²´ í•˜ë‚˜ë¥¼ ë§Œë“¤ë ¤ë©´ ë©”ì„œë“œë¥¼ ì—¬ëŸ¬ ê°œ í˜¸ì¶œí•´ì•¼ í•˜ê³ , ê°ì²´ê°€ ì™„ì „íˆ ìƒì„±ë˜ê¸° ì „ê¹Œì§€ëŠ” 
    ì¼ê´€ì„±(consistency)ì´ ë¬´ë„ˆì§„ ìƒíƒœì— ë†“ì´ê²Œ ëœë‹¤.
    ìë°”ë¹ˆì¦ˆ íŒ¨í„´ì—ì„œëŠ” í´ë˜ìŠ¤ë¥¼ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ì—†ìœ¼ë©° ìŠ¤ë ˆë“œ ì•ˆì „ì„±ì„ ì–»ìœ¼ë ¤ë©´ ì¶”ê°€ ì‘ì—…ì„ í•´ì¤˜ì•¼ë§Œ í•œë‹¤.
    
    </aside>
    
    ì´ëŸ¬í•œ ë‹¨ì ì„ ì™„í™”í•˜ê³ ì ìƒì„±ì´ ëë‚œ ê°ì²´ë¥¼ ìˆ˜ë™ìœ¼ë¡œ â€˜ì–¼ë¦¬ê³ (freezing)â€™, ì–¼ë¦¬ê¸° ì „ì—ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë„ë¡ í•˜ê¸°ë„ í•œë‹¤.
    
    í•˜ì§€ë§Œ ì´ ë°©ë²•ì€ ë‹¤ë£¨ê¸° ì–´ë ¤ì›Œì„œ ì‹¤ì „ì—ì„œëŠ” ê±°ì˜ ì“°ì´ì§€ ì•ŠëŠ”ë‹¤. 
    (= freeze ë©”ì„œë“œë¥¼ í™•ì‹¤íˆ í˜¸ì¶œí•´ì¤¬ëŠ”ì§€ë¥¼ ì»´íŒŒì¼ëŸ¬ê°€ ë³´ì¦í•  ë°©ë²•ì´ ì—†ì–´ì„œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ì— ì·¨ì•½í•˜ë‹¤)
    
    ---
    
    ```java
    public class NutritionFactsBuilderPattern {
        private final int servingSize;
        private final int servings;
        private final int calories;
        private final int fat;
        private final int sodium;
        private final int carbohydrate;
    
        public static class Builder {
            // í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜
            private final int servingSize;
            private final int servings;
    
            // ì„ íƒ ë°°ê°œë³€ìˆ˜ - ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤.
            private int calories     = 0;
            private int fat          = 0;
            private int sodium       = 0;
            private int carbohydrate = 0;
    
            public Builder(int servingSize, int servings) {
                this.servingSize = servingSize;
                this.servings = servings;
            }
    
            public Builder calories(int val) {
                calories = val;
                return this;
            }
    
            public Builder sodium(int val) {
                sodium = val;
                return this;
            }
    
            public Builder carbohydrate(int val) {
                carbohydrate = val;
                return this;
            }
        }
    
        public NutritionFactsBuilderPattern(Builder builder) {
            servingSize  = builder.servingSize;
            servings     = builder.servings;
            calories     = builder.calories;
            fat          = builder.fat;
            sodium       = builder.sodium;
            carbohydrate = builder.carbohydrate;
        }
    }
    ```
    
    NutritionFactsBuilderPattern í´ë˜ìŠ¤ëŠ” ë¶ˆë³€ì´ë©°, ëª¨ë“  ë§¤ê°œë³€ìˆ˜ì˜ ê¸°ë³¸ê°’ë“¤ì„ í•œê³³ì— ëª¨ì•„ë’€ë‹¤.
    
    ë¹Œë”ì˜ ì„¸í„° ë©”ì„œë“œë“¤ì€ ë¹Œë” ìì‹ ì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ì—°ì‡„ì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
    
    ```java
    NutritionFactsBuilderPattern builderPattern =
                    new NutritionFactsBuilderPattern.Builder(10, 20)
                            .calories(30)
                            .sodium(40)
                            .carbohydrate(50)
                            .build();
    ```
    
    ì˜ëª»ëœ ë§¤ê°œë³€ìˆ˜ë¥¼ ìµœëŒ€í•œ ì¼ì° ë°œê²¬í•˜ë ¤ë©´ ë¹Œë”ì˜ ìƒì„±ìì™€ ë©”ì„œë“œì—ì„œ ì…ë ¥ ë§¤ê°œë³€ìˆ˜ë¥¼ ê²€ì‚¬í•˜ê³ , build ë©§ë“œê°€ í˜¸ì¶œí•˜ëŠ” ìƒì„±ìì—ì„œ ì—¬ëŸ¬ ë§¤ê°œë³€ìˆ˜ì— ê±¸ì¹œ ë¶ˆë³€ì‹(invariant)ì„ ê²€ì‚¬í•˜ì. ê³µê²©ì— ëŒ€ë¹„í•´ ì´ëŸ° ë¶ˆë³€ì‹ì„ ë³´ì¥í•˜ë ¤ë©´ ë¹Œë”ë¡œë¶€í„° ë§¤ê°œë³€ìˆ˜ë¥¼ ë³µì‚¬í•œ í›„ í•´ë‹¹ ê°ì²´ í•„ë“œë“¤ë„ ê²€ì‚¬í•´ì•¼ í•œë‹¤.
    
    ì˜ëª»ëœ ë§¤ê°œë³€ìˆ˜ë¥¼ ìì„¸íˆ ì•Œë ¤ì£¼ëŠ” IllegalArgumentExceptionì„ ë˜ì§€ë©´ ëœë‹¤.
    
    <aside>
    ğŸ’¡ ë¹Œë” íŒ¨í„´ì€ ê³„ì¸µì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì™€ í•¨ê»˜ ìŠ¤ê¸°ì— ì¢‹ë‹¤.
    
    </aside>
    
    ---
    
    ```java
    public abstract class Pizza {
        public enum Topping {
            HAM, MUSHROOM, ONION, PEPPER, SAUSAGE
        }
        final Set<Topping> toppings;
    
        abstract static class Builder<T extends Builder<T>> {
            EnumSet<Topping> toppings = EnumSet.noneOf(Topping.class);
            public T addTopping(Topping topping) {
                toppings.add(Objects.requireNonNull(topping));
                return self();
            }
    
            abstract Pizza build();
    
            // í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ì´ ë©”ì„œë“œë¥¼ ì¬ì •ì˜(overriding)í•˜ì—¬ "this"ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•´ì•¼ í•œë‹¤.
            protected abstract T self();
        }
    
        Pizza(Builder<?> builder) {
            toppings = builder.toppings.clone();
        }
    }
    ```
    
    Pizza.Builder í´ë˜ìŠ¤ëŠ” ì¬ê·€ì  íƒ€ì… í•œì •ì„ ì´ìš©í•˜ëŠ” ì œë„¤ë¦­ íƒ€ì…ì´ë‹¤.
    
    ì—¬ê¸°ì— ì¶”ìƒ ë©”ì„œë“œì¸ selfë¥¼ ë”í•´ í•˜ìœ„ í´ë˜ìŠ¤(NyPizza)ì—ì„œëŠ” í˜•ë³€í™˜í•˜ì§€ ì•Šê³ ë„ ë©”ì„œë“œ ì—°ì‡„ë¥¼ ì§€ì›í•  ìˆ˜ ìˆë‹¤.
    
    self íƒ€ì…ì´ ì—†ëŠ” ìë°”ë¥¼ ìœ„í•œ ì´ ìš°íšŒ ë°©ë²•ì„ ì‹œë®¬ë ˆì´íŠ¸í•œ ì…€í”„ íƒ€ì…(simulated self-type) ê´€ìš©êµ¬ë¼ í•œë‹¤.
    
    [Enum](%E1%84%80%E1%85%A2%E1%86%A8%E1%84%8E%E1%85%A6%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%E1%84%80%E1%85%AA%20%E1%84%91%E1%85%A1%E1%84%80%E1%85%AC%20c1cef9d92ff042008c9c7e248d94bc08/Enum%20eb000a0d676540b292d242282c9c2b59.md) - EnumSet
    
    ```java
    public class NyPizza extends Pizza {
        public enum Size {
            SMALL, MEDIUM, LARGE
        }
    
        private final Size size;
    
        public static class Builder extends Pizza.Builder<Builder> {
            private final Size size;
    
            public Builder(Size size) {
                this.size = Objects.requireNonNull(size);
            }
    
            @Override
            public NyPizza build() {
                return new NyPizza(this);
            }
    
            @Override
            protected Builder self() {
                return this;
            }
        }
    
        private NyPizza(Builder builder) {
            super(builder);
            size = builder.size;
        }
    
        @Override
        public String toString() {
            return "toppings=" + toppings
                    + ", size=" + size;
        }
    }
    ```
    
    ```java
    public class Calzone extends Pizza {
        private final boolean sauceInside;
    
        public static class Builder extends Pizza.Builder {
            private boolean sauceInside = false;
    
            public Builder sauceInside() {
                sauceInside = true;
                return this;
            }
    
            @Override
            public Calzone build() {
                return new Calzone(this);
            }
    
            @Override
            protected Pizza.Builder self() {
                return this;
            }
        }
    
        Calzone(Builder builder) {
            super(builder);
            sauceInside = builder.sauceInside;
        }
    }
    ```
    
    ```java
    NyPizza pizza = new NyPizza.Builder(NyPizza.Size.SMALL)
            .addTopping(Pizza.Topping.SAUSAGE)
            .addTopping(Pizza.Topping.ONION)
            .build();
    
    Calzone cal = new Calzone.Builder()
            .addTopping(Pizza.Topping.HAM)
            .sauceInside()
            .build();
    ```
    
    ê° í•˜ìœ„ í´ë˜ìŠ¤ì˜ ë¹Œë”ê°€ ì •ì˜í•œ build ë©”ì„œë“œëŠ” í•´ë‹¹í•˜ëŠ” êµ¬ì²´ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„ ì–¸í•œë‹¤.
    
    NyPizza.BuilderëŠ” NyPizzaë¥¼ ë°˜í™˜í•˜ê³ , Calzone.BuilderëŠ” Calzoneë¥¼ ë°˜í™˜í•œë‹¤ëŠ” ëœ»ì´ë‹¤.
    
    í•˜ìœ„ íƒ€ì…ì„ ë°˜í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ ê³µë³€ ë°˜í™˜ íƒ€ì´í•‘(convariant return typing)ì´ë¼ í•œë‹¤.
    
    í´ë¼ì´ì–¸íŠ¸ê°€ í˜•ë³€í™˜ì— ì‹ ê²½ ì“°ì§€ ì•Šê³ ë„ ë¹Œë”ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    
    <aside>
    ğŸ’¡ ìƒì„±ìë‚˜ ì •ì  íŒ©í„°ë¦¬ê°€ ì²˜ë¦¬í•´ì•¼ í•  ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë” íŒ¨í„´ì„ ì„ íƒí•˜ëŠ” ê²Œ ë” ë‚«ë‹¤.
    ë§¤ê°œë³€ìˆ˜ ì¤‘ ë‹¤ìˆ˜ê°€ í•„ìˆ˜ê°€ ì•„ë‹ˆê±°ë‚˜ ê°™ì€ íƒ€ì…ì´ë©´ íŠ¹íˆ ë” ê·¸ë ‡ë‹¤. ë¹Œë”ëŠ” ì ì¸µì  ìƒì„±ìë³´ë‹¤ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì½ê³  ì“°ê¸°ê°€ í›¨ì”¬ ê°„ê²°í•˜ê³ , ìë°”ë¹ˆì¦ˆë³´ë‹¤ í›¨ì”¬ ì•ˆì „í•˜ë‹¤.
    
    </aside>
    

---

- private ìƒì„±ìë‚˜ ì—´ê±° íƒ€ì…ìœ¼ë¡œ ì‹±ê¸€í„´ì„ì„ ë³´ì¦í•˜ë¼
    
    > í´ë˜ìŠ¤ë¥¼ ì‹±ê¸€í„´ìœ¼ë¡œ ë§Œë“¤ë©´ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸°ê°€ ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆë‹¤.
    > 
    
    ```java
    public class Elvis {
        public static final Elvis INSTANCE = new Elvis();
    
        private Elvis() {
        }
    }
    ```
    
    private ìƒì„±ìëŠ” public static final í•„ë“œì¸ Elvis.INSANCEë¥¼ ì´ˆê¸°í™”í•  ë•Œ ë”± í•œ ë²ˆë§Œ í˜¸ì¶œëœë‹¤.
    
    publicì´ë‚˜ protected ìƒì„±ìê°€ ì—†ìœ¼ë¯€ë¡œ Elvis í´ë˜ìŠ¤ê°€ ì´ˆê¸°í™”ë  ë•Œ ë§Œë“¤ì–´ì§„ ì¸ìŠ¤í„´ìŠ¤ê°€ ì „ì²´ ì‹œìŠ¤í…œì—ì„œ í•˜ë‚˜ë¿ì„ì´ ë³´ì¥ëœë‹¤.
    
    ì˜ˆì™¸ëŠ” ë‹¨ í•œ ê°€ì§€, ê¶Œí•œì´ ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ëŠ” ë¦¬í”Œë ‰ì…˜ APIì¸ AccessibleObject.setAccessibleì„ ì‚¬ìš©í•´ private ìƒì„±ìë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
    
    ì´ëŸ¬í•œ ê³µê²©ì„ ë°©ì–´í•˜ë ¤ë©´ ìƒì„±ìë¥¼ ìˆ˜ì •í•˜ì—¬ ë‘ ë²ˆì§¸ ê°ì²´ê°€ ìƒì„±ë˜ë ¤ í•  ë•Œ ì˜ˆì™¸ë¥¼ ë˜ì§€ê²Œ í•˜ë©´ ëœë‹¤.
    
    ```java
    public class Elvis2 {
        private static final Elvis2 INSTANCE = new Elvis2();
    
        private Elvis2() {
        }
    
        public static Elvis2 getInstance() {
            return INSTANCE;
        }
    }
    ```
    
    Elvis.getInstanceëŠ” í•­ìƒ ê°™ì€ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ ì œ2ì˜ Elvis ì¸ìŠ¤í„´ìŠ¤ë€ ê²°ì½” ë§Œë“¤ì–´ì§€ì§€ ì•Šë‹¤(ì—­ì‹œ ë¦¬í”Œë ‰ì…˜ì„ í†µí•œ ì˜ˆì™¸ëŠ” ë˜‘ê°™ì´ ì ìš©ëœë‹¤).
    
    public í•„ë“œ ë°©ì‹ì˜ í° ì¥ì ì€ í•´ë‹¹ í´ë˜ìŠ¤ê°€ ì‹±ê¸€í„´ì„ì´ APIì— ëª…ë°±íˆ ë“œëŸ¬ë‚œë‹¤ëŠ” ê²ƒì´ë‹¤.
    
    public static í•„ë“œê°€ finalì´ë‹ˆ ì ˆëŒ€ë¡œ ë‹¤ë¥¸ ê°ì²´ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤.
    
    ì •ì  íŒ©í„°ë¦¬ ë°©ì‹ì˜ ì¥ì 
    
    1. APIë¥¼ ë°”ê¾¸ì§€ ì•Šê³ ë„ ì‹±ê¸€í„´ì´ ì•„ë‹ˆê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. ìœ ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ë˜ íŒ©í„°ë¦¬ ë©”ì„œë“œê°€ í˜¸ì¶œí•˜ëŠ” ìŠ¤ë ˆë“œë³„ë¡œ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„˜ê²¨ì£¼ê²Œ í•  ìˆ˜ ìˆë‹¤.
    2. ì›í•œë‹¤ë©´ ì •ì  íŒ©í„°ë¦¬ë¥¼ ì œë„¤ë¦­ ì‹±ê¸€í„´ íŒ©í„°ë¦¬ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
    3. ì •ì  íŒ©í„°ë¦¬ì˜ ë©”ì„œë“œ ì°¸ì¡°ë¥¼ ê³µê¸‰ì(supplier)ë¡œ ì‚¬ìš©í•˜ëŠ” ì‹
    
    ì´ëŸ¬í•œ ì¥ì ë“¤ì´ êµ³ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤ë©´ public í•„ë“œ ë°©ì‹ì´ ì¢‹ë‹¤.
    
    ë‘˜ ì¤‘ í•˜ë‚˜ì˜ ë°©ì‹ìœ¼ë¡œ ë§Œë“  ì‹±ê¸€í„´í´ë˜ìŠ¤ë¥¼ ì§ë ¬í™”í•˜ë ¤ë©´ ë‹¨ìˆœíˆ Serializableì„ êµ¬í˜„í•œë‹¤ê³  ì„ ì–¸í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•˜ë‹¤.
    
    ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ í•„ë“œë¥¼ ì¼ì‹œì (transient)ì´ë¼ê³  ì„ ì–¸í•˜ê³  readResolve ë©”ì„œë“œë¥¼ ì œê³µí•´ì•¼ í•œë‹¤.
    
    ì´ë ‡ê²Œ í•˜ì§€ ì•Šìœ¼ë©´ ì§ë ¬í™”ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—­ì§ë ¬í™”í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ê°€ ë§Œë“¤ì–´ì§„ë‹¤.(ê°€ì§œ Elvis íƒ„ìƒ)
    
    ```java
    private Object readResolve() {
        // 'ì§„ì§œ' Elvisë¥¼ ë°˜í™˜í•˜ê³ , ê°€ì§œ ElvisëŠ” ê°€ë¹„ì§€ ì»¬ë ‰í„°ì— ë§¡ê¸´ë‹¤.
        return INSTANCE;
    }
    ```
    
    ```java
    public enum Elvis3 {
        INSTANCE;
    }
    ```
    
    public í•„ë“œ ë°©ì‹ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ,  ë” ê°„ê²°í•˜ê³ , ì¶”ê°€ ë…¸ë ¥ ì—†ì´ ì§ë ¬í™”í•  ìˆ˜ ìˆê³ , ì‹¬ì§€ì–´ ì•„ì£¼ ë³µì¡í•œ ì§ë ¬í™” ìƒí™©ì´ë‚˜ ë¦¬í”Œë ‰ì…˜ ê³µê²©ì—ì„œë„ ì œ 2ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒê¸°ëŠ” ì¼ì€ ì™„ë²½íˆ ë§‰ì•„ì¤€ë‹¤.
    
    <aside>
    ğŸ’¡ ëŒ€ë¶€ë¶„ ìƒí™©ì—ì„œëŠ” ì›ì†Œê°€ í•˜ë‚˜ë¿ì¸ ì—´ê±° íƒ€ì…ì´ ì‹±ê¸€í„´ì„ ë§Œë“œëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì´ë‹¤.
    (ë‹¨, ë§Œë“¤ë ¤ëŠ” ì‹±ê¸€í„´ì´ Enum ì´ì™¸ì˜ í´ë˜ìŠ¤ë¥¼ ìƒì†í•´ì•¼ í•œë‹¤ë©´ ì´ ë°©ë²•ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.)
    
    </aside>
    

---

- ì¸ìŠ¤í„´ìŠ¤í™”ë¥¼ ë§‰ìœ¼ë ¤ê±°ë“  private ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ë¼
    
    ì¶”ìƒ í´ë˜ìŠ¤ë¡œ ë§Œë“œëŠ” ê²ƒìœ¼ë¡œëŠ” ì¸ìŠ¤í„´ìŠ¤í™”ë¥¼ ë§‰ì„ ìˆ˜ ì—†ë‹¤.
    
    private ìƒì„±ìë¥¼ ì¶”ê°€í•˜ë©´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤í™”ë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤.
    
    ```java
    public class UtilityClass {
        // ê¸°ë³¸ ìƒì„±ì ë§Œë“¤ì–´ì§€ëŠ” ê²ƒì„ ë§‰ëŠ”ë‹¤(ì¸ìŠ¤í„´ìŠ¤í™” ë°©ì§€ìš©).
        private UtilityClass() {
            throw new AssertionError();
        }
    }
    ```
    

---

- ìì›ì„ ì§ì ‘ ëª…ì‹œí•˜ì§€ ë§ê³  ì˜ì¡´ ê°ì²´ ì£¼ì…ì„ ì‚¬ìš©í•˜ë¼
    
    ì‚¬ìš©í•˜ëŠ” ìì›ì— ë”°ë¼ ë™ì‘ì´ ë‹¬ë¼ì§€ëŠ” í´ë˜ìŠ¤ì—ëŠ” ì •ì  ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ë‚˜ ì‹±ê¸€í„´ ë°©ì‹ì´ ì í•©í•˜ì§€ ì•Šë‹¤.
    
    ëŒ€ì‹  í´ë˜ìŠ¤(SpellChecker)ê°€ ì—¬ëŸ¬ ìì› ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§€ì›í•´ì•¼ í•˜ë©°, í´ë¼ì´ì–¸íŠ¸ê°€ ì›í•˜ëŠ” ìì›(dictionary)ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
    ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ìƒì„±ìì— í•„ìš”í•œ ìì›ì„ ë„˜ê²¨ì£¼ëŠ” ë°©ì‹
    
    ```java
    public class SpellChecker {
        private final Lexicon dictionary;
    
        public SpellChecker(Lexicon dictionary) {
            this.dictionary = Objects.requireNonNull(dictionary);
        }
    }
    ```
    
    <aside>
    ğŸ’¡ í´ë˜ìŠ¤ê°€ ë‚´ë¶€ì ìœ¼ë¡œ í•˜ë‚˜ ì´ìƒì˜ ìì›ì— ì˜ì¡´í•˜ê³ , ê·¸ ìì›ì´ í´ë˜ìŠ¤ ë™ì‘ì— ì˜í–¥ì„ ì¤€ë‹¤ë©´ ì‹±ê¸€í„´ê³¼ ì •ì  ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ê²ƒì´ ì¢‹ë‹¤. ì´ ìì›ë“¤ì„ í´ë˜ìŠ¤ê°€ ì§ì ‘ ë§Œë“¤ê²Œ í•´ì„œë„ ì•ˆ ëœë‹¤. ëŒ€ì‹  í•„ìš”í•œ ìì›ì„ ìƒì„±ìì— ë„˜ê²¨ì£¼ì. ì˜ì¡´ ê°ì²´ ì£¼ì…ì´ë¼ í•˜ëŠ” ì´ ê¸°ë²•ì€ í´ë˜ìŠ¤ì˜ ìœ ì—°ì„±, ì¬ì‚¬ìš©ì„±, í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì„ ê¸°ë§‰íˆê²Œ ê°œì„ í•´ì¤€ë‹¤.
    
    </aside>
    

---

- ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ë¼
    
    ë˜‘ê°™ì€ ê¸°ëŠ¥ì˜ ê°ì²´ë¥¼ ìƒì„±í•˜ê¸°ë³´ë‹¤ëŠ” ê°ì²´ í•˜ë‚˜ë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” í¸ì´ ë‚˜ì„ ë•Œê°€ ë§ë‹¤.
    
    ì¬ì‚¬ìš©ì€ ë¹ ë¥´ê³  ì„¸ë ¨ë˜ë‹¤.
    
    íŠ¹íˆ ë¶ˆë³€ ê°ì²´ëŠ” ì–¸ì œë“  ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    
    ìƒì„±ìëŠ” í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë§Œë“¤ì§€ë§Œ, íŒ©í„°ë¦¬ ë©”ì„œë“œëŠ” ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤.
    
    ë¶ˆë³€ ê°ì²´ë§Œì´ ì•„ë‹ˆë¼ ê°€ë³€ ê°ì²´ë¼ í•´ë„ ì‚¬ìš© ì¤‘ì— ë³€ê²½ë˜ì§€ ì•Šì„ ê²ƒì„ì„ ì•ˆë‹¤ë©´ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    
    ìƒì„± ë¹„ìš©ì´ ì•„ì£¼ ë¹„ì‹¼ ê°ì²´ë„ ë”ëŸ¬ ìˆë‹¤. ì´ëŸ° â€˜ë¹„ì‹¼ ê°ì²´â€™ê°€ ë°˜ë³µí•´ì„œ í•„ìš”í•˜ë‹¤ë©´ ìºì‹±í•˜ì—¬ ì¬ì‚¬ìš©í•˜ê¸¸ ë°”ë€ë‹¤.
    
    ```java
    static boolean isRomanNumeral(String s) {
          return s.matches("^(?=.)M*(C[MD]|D?C{0,3})"
                  + "(X[CL]|L?X{0,3}](I[XV]|V?I{0,3}))$");
      }
    ```
    
    ì´ ë©”ì„œë“œê°€ ë‚´ë¶€ì—ì„œ ë§Œë“œëŠ” ì •ê·œí‘œí˜„ì‹ìš© Pattern ì¸ìŠ¤í„´ìŠ¤ëŠ”, í•œ ë²ˆ ì“°ê³  ë²„ë ¤ì ¸ì„œ ê³§ë°”ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ëŒ€ìƒì´ ëœë‹¤.
    
    Patternì€ ì…ë ¥ë°›ì€ ì •ê·œí‘œí˜„ì‹ì— í•´ë‹¹í•˜ëŠ” ìœ í•œ ìƒíƒœ ë¨¸ì‹ (finite state machine)ì„ ë§Œë“¤ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¹„ìš©ì´ ë†’ë‹¤.
    
    ì„±ëŠ¥ì„ ê°œì„ í•˜ë ¤ë©´ í•„ìš”í•œ ì •ê·œí‘œí˜„ì‹ì„ í‘œí˜„í•˜ëŠ” (ë¶ˆë³€ì¸) Pattern ì¸ìŠ¤í„´ìŠ¤ë¥¼ í´ë˜ìŠ¤ ì´ˆê¸°í™”(ì •ì  ì´ˆê¸°í™”) ê³¼ì •ì—ì„œ ì§ì ‘ ìƒì„±í•´ ìºì‹±í•´ë‘ê³ , ë‚˜ì¤‘ì— isRomanNumeral ë©”ì„œë“œê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ì´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•œë‹¤.
    
    ```java
    class RomanNumerals {
        private static final Pattern ROMAN = Pattern.compile(
                "^(?=.)M*(C[MD]|D?C{0,3})"
                        + "(X[CL]|L?X{0,3}](I[XV]|V?I{0,3}))$");
    
        static boolean isRomanNumeral(String s) {
            return ROMAN.matcher(s).matches();
        }
    }
    ```
    
    Map ì¸í„°í˜ì´ìŠ¤ì˜ keySet ë©”ì„œë“œëŠ” Map ê°ì²´ ì•ˆì˜ í‚¤ ì „ë¶€ë¥¼ ë‹´ì€ Set ë·°ë¥¼ ë°˜í™˜í•œë‹¤.
    
    ë°˜í™˜í•œ ê°ì²´ ì¤‘ í•˜ë‚˜ë¥¼ ìˆ˜ì •í•˜ë©´ ë‹¤ë¥¸ ëª¨ë“  ê°ì²´ê°€ ë”°ë¼ì„œ ë°”ë€ë‹¤.
    
    ëª¨ë‘ê°€ ë˜‘ê°™ì€ Map ì¸ìŠ¤í„´ìŠ¤ë¥¼ ëŒ€ë³€í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
    
    ë”°ë¼ì„œ keySetì´ ë·° ê°ì²´ë¥¼ ì—¬ëŸ¬ ê°œ ë§Œë“¤ì–´ë„ ìƒê´€ì€ ì—†ì§€ë§Œ, ê·¸ëŸ´ í•„ìš”ë„ ì—†ê³  ì´ë“ë„ ì—†ë‹¤.
    
    ë¶ˆí•„ìš”í•œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ë˜ ë‹¤ë¥¸ ì˜ˆë¡œ ì˜¤í† ë°•ì‹±(auto boxing)ì„ ë“¤ ìˆ˜ ìˆë‹¤.
    
    **ì˜¤í† ë°•ì‹±ì€ ê¸°ë³¸ íƒ€ì…ê³¼ ê·¸ì— ëŒ€ì‘í•˜ëŠ” ë°•ì‹±ëœ ê¸°ë³¸ íƒ€ì…ì˜ êµ¬ë¶„ì„ íë ¤ì£¼ì§€ë§Œ, ì™„ì „íˆ ì—†ì• ì£¼ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.**
    
    ì˜ë¯¸ìƒìœ¼ë¡œëŠ” ë³„ë‹¤ë¥¼ ê²ƒ ì—†ì§€ë§Œ ì„±ëŠ¥ì—ì„œëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤.
    
    ```java
    private static long sum() {
        Long sum = 0L;
        for (long i = 0; i <= Integer.MAX_VALUE; i++)
            sum += i;
    
        return sum;
    }
    ```
    
    **ë°•ì‹±ëœ ê¸°ë³¸ íƒ€ì…ë³´ë‹¤ëŠ” ê¸°ë³¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ê³ , ì˜ë„ì¹˜ ì•Šì€ ì˜¤í† ë°•ì‹±ì´ ìˆ¨ì–´ë“¤ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì.**
    

---

- ë‹¤ ì“´ ê°ì²´ ì°¸ì¡°ë¥¼ í•´ì œí•˜ë¼
    
    ```java
    public class StackApplication {
        private Object[] elements;
        private int size = 0;
        private static final int DEFAULT_INITIAL_CAPACITY = 16;
    
        public StackApplication() {
            elements = new Object[DEFAULT_INITIAL_CAPACITY];
        }
    
        public void push(Object e) {
            ensureCapacity();
            elements[size++] = e;
        }
    
        public Object pop() {
            if (size == 0)
                throw new EmptyStackException();
            return elements[--size];
        }
    
        private void ensureCapacity() {
            if (elements.length == size)
                elements = Arrays.copyOf(elements, 2 * size + 1);
        }
    }
    ```
    
    ì´ ìŠ¤íƒì„ ì‚¬ìš©í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì˜¤ë˜ ì‹¤í–‰í•˜ë‹¤ ë³´ë©´ ì ì°¨ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ í™œë™ê³¼ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ëŠ˜ì–´ë‚˜ ê²°êµ­ ì„±ëŠ¥ì´ ì €í•˜ë  ê²ƒì´ë‹¤.
    
    ìƒëŒ€ì ìœ¼ë¡œ ë“œë¬¸ ê²½ìš°ê¸´ í•˜ì§€ë§Œ ì‹¬í•  ë•ŒëŠ” ë””ìŠ¤í¬ í˜ì´ì§•ì´ë‚˜ OutOfMemoryErrorë¥¼ ì¼ìœ¼ì¼œ í”„ë¡œê·¸ë¨ì´ ì˜ˆê¸°ì¹˜ ì•Šê²Œ ì¢…ë£Œë„íˆê¸°ë„ í•œë‹¤.
    
    ì´ ìŠ¤íƒì´ ê·¸ ê°ì²´ë“¤ì˜ ë‹¤ ì“´ ì°¸ì¡°(obsolete reference)ë¥¼ ì—¬ì „íˆ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.
    
    ê°ì²´ ì°¸ì¡° í•˜ë‚˜ë¥¼ ì‚´ë ¤ë‘ë©´ ê°€ë¹„ì§€ ì»¬ë ‰í„°ëŠ” ê·¸ ê°ì²´ë¿ ì•„ë‹ˆë¼ ê·¸ ê°ì²´ê°€ ì°¸ì¡°í•˜ëŠ” ëª¨ë“  ê°ì²´ë¥¼ íšŒìˆ˜í•´ê°€ì§€ ëª»í•œë‹¤.
    
    **í•´ë‹¹ ì°¸ì¡°ë¥¼ ë‹¤ ì¼ì„ ë•Œ null ì²˜ë¦¬(ì°¸ì¡° í•´ì œ)í•˜ë©´ ëœë‹¤.**
    
    ```java
    public Object pop() {
        if (size == 0)
            throw new EmptyStackException();
        Object result = elements[--size];
        elements[size] = null; // ë‹¤ ì“´ ì°¸ì¡° í•´ì œ
        return result;
    }
    ```
    
    ë‹¤ ì“´ ì°¸ì¡°ë¥¼ null ì²˜ë¦¬í•˜ë©´ ë‹¤ë¥¸ ì´ì ë„ ë”°ë¼ì˜¨ë‹¤. 
    
    ë§Œì•½ null ì²˜ë¦¬í•œ ì°¸ì¡°ë¥¼ ì‹¤ìˆ˜ë¡œ ì‚¬ìš©í•˜ë ¤ í•˜ë©´ í”„ë¡œê·¸ë¨ì€ ì¦‰ì‹œ NullPointerExceptionì„ ë˜ì§€ë©° ì¢…ë£Œëœë‹¤.
    
    **ê°ì²´ ì°¸ì¡°ë¥¼ null ì²˜ë¦¬í•˜ëŠ” ì¼ì€ ì˜ˆì™¸ì ì¸ ê²½ìš°ì—¬ì•¼ í•œë‹¤.**
    
    ì¼ë°˜ì ìœ¼ë¡œ **ìê¸° ë©”ëª¨ë¦¬ë¥¼ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ë¼ë©´ í”„ë¡œê·¸ë˜ë¨¸ëŠ” í•­ì‹œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ì— ì£¼ì˜í•´ì•¼ í•œë‹¤.(null ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤.)**
    
    **ìºì‹œ ì—­ì‹œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ì¼ìœ¼í‚¤ëŠ” ì£¼ë²”ì´ë‹¤.**
    
    <aside>
    ğŸ’¡ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ëŠ” ê²‰ìœ¼ë¡œ ì˜ ë“œëŸ¬ë‚˜ì§€ ì•Šì•„ ì‹œìŠ¤í…œì— ìˆ˜ë…„ê°„ ì ë³µí•˜ëŠ” ì‚¬ë¡€ë„ ìˆë‹¤. ì´ëŸ° ëˆ„ìˆ˜ëŠ” ì² ì €í•œ ì½”ë“œ ë¦¬ë·°ë‚˜ í™ í”„ë¡œíŒŒì¼ëŸ¬ ê°™ì€ ë””ë²„ê¹… ë„êµ¬ë¥¼ ë™ì›í•´ì•¼ë§Œ ë°œê²¬ë˜ê¸°ë„ í•œë‹¤. ê·¸ë˜ì„œ ì´ëŸ° ì¢…ë¥˜ì˜ ë¬¸ì œëŠ” ì˜ˆë°©ë²•ì„ ìµí˜€ë‘ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.
    
    </aside>
    

---

- finalizerì™€ cleaner ì‚¬ìš©ì„ í”¼í•˜ë¼
    
    ìë°”ëŠ” ë‘ ê°€ì§€ ê°ì²´ ì†Œë©¸ìë¥¼ ì œê³µí•œë‹¤. **ê·¸ì¤‘ finalizerëŠ” ì—ì¸¡í•  ìˆ˜ ì—†ê³ , ìƒí™©ì— ë”°ë¼ ìœ„í—˜í•  ìˆ˜ ìˆì–´ ì¼ë°˜ì ìœ¼ë¡œ ë¶ˆí•„ìš”í•˜ë‹¤.**
    
    **cleanerëŠ” finalizerë³´ë‹¤ëŠ” ëœ ìœ„í—˜í•˜ì§€ë§Œ, ì—¬ì „íˆ ì—ì¸¡í•  ìˆ˜ ì—†ê³ , ëŠë¦¬ê³ , ì¼ë°˜ì ìœ¼ë¡œ ë¶ˆí•„ìš”í•˜ë‹¤.**
    
    finalizerì™€ cleanerëŠ” ì¦‰ì‹œ ìˆ˜í–‰ëœë‹¤ëŠ” ë³´ì¥ì´ ì—†ë‹¤.
    
    **ì¦‰, finalizerì™€ cleanerëŠ” ì œë•Œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì‘ì—…ì€ ì ˆëŒ€ í•  ìˆ˜ ì—†ë‹¤.**
    
    ì˜ˆì»¨ë° ì‹œìŠ¤í…œì´ ë™ì‹œì— ì—´ ìˆ˜ ìˆëŠ” íŒŒì¼ ê°œìˆ˜ì— í•œê³„ê°€ ìˆê¸° ë•Œë¬¸ì— íŒŒì¼ ë‹«ê¸°ë¥¼ finalizerë‚˜ cleanerì— ë§¡ê¸°ë©´ ì¤‘ëŒ€í•œ ì˜¤ë¥˜ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤.
    
    > finalizerë‚˜ cleanerë¥¼ ëŒ€ì‹ í•´ì¤„ ë¬˜ì•ˆì€ ë¬´ì—‡ì¼ê¹Œ?
    > 
    
    **ê·¸ì € AutoCloseableì„ êµ¬í˜„í•´ì£¼ê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥´ ë‹¤ ì“°ê³  ë‚˜ë©´ close ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ëœë‹¤.**
    
    ì¼ë°˜ì ìœ¼ë¡œ ì˜ˆì™¸ê°€ ë°œìƒí•´ë„ ì œëŒ€ë¡œ ì¢…ë£Œë˜ë„ë¡ try-with-resourcesë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
    
    ê° ì¸ìŠ¤í„´ìŠ¤ëŠ” ìì‹ ì´ ë‹«í˜”ëŠ”ì§€ë¥¼ ì¶”ì í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ë‹¤ì‹œ ë§í•´, close ë©”ì„œë“œì—ì„œ ì´ ê°ì²´ëŠ” ë” ì´ìƒ ìœ íš¨í•˜ì§€ ì•ŠìŒì„ í•„ë“œì— ê¸°ë¡í•˜ê³ , ë‹¤ë¥¸ ë©”ì„œë“œëŠ” ì´ í•„ë“œë¥¼ ê²€ì‚¬í•´ì„œ ê°ì²´ê°€ ë‹«íŒ í›„ì— ë¶ˆë ¸ë‹¤ë©´ IllegalStateExceptionì„ ë˜ì§€ëŠ” ê²ƒì´ë‹¤.
    
    > cleanerì™€ finalizerëŠ” ëŒ€ì²´ ì–´ë””ì— ì“°ëŠ” ë¬¼ê±´ì¸ê°€? (2ê°€ì§€)
    > 
    1. ìì›ì˜ ì†Œìœ ìê°€ close ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ” ê²ƒì— ëŒ€ë¹„í•œ ì•ˆì „ë§ ì—­í• ì´ë‹¤.
    2. ë„¤ì´í‹°ë¸Œ í”¼ì–´(native peer)ì™€ ì—°ê²°ëœ ê°ì²´ì´ë‹¤.
    ì¼ë°˜ ìë°” ê°ì²´ê°€ ë„¤ì´í‹°ë¸Œ ë©”ì„œë“œë¥¼ í†µí•´ ê¸°ëŠ¥ì„ ìœ„ì„í•œ ë„¤ì´í‹°ë¸Œ ê°ì²´ë¥¼ ë§í•œë‹¤.
    
    **finalizerì™€ ë‹¬ë¦¬ cleanerëŠ” í´ë˜ìŠ¤ì˜ public APIì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ”ë‹¤.**
    
    ```java
    public class Room implements AutoCloseable {
        private static final Cleaner cleaner = Cleaner.create();
    
        private static class State implements Runnable {
            int numJunkPiles; // ë°©(Room) ì•ˆì˜ ì“°ë ˆê¸° ìˆ˜
    
            State(int numJunkPiles) {
                this.numJunkPiles = numJunkPiles;
            }
    
            @Override
            public void run() {
                System.out.println("ë°© ì²­ì†Œ");
                numJunkPiles = 0;
            }
        }
    
        private final State state;
    
        private final Cleaner.Cleanable cleanable;
    
        public Room(int numJunkPiles) {
            state = new State(numJunkPiles);
            cleanable = cleaner.register(this, state);
        }
    
        @Override
        public void close() {
            cleanable.clean();
        }
    }
    ```
    
    staticìœ¼ë¡œ ì„ ì–¸ëœ ì¤‘ì²© í´ë˜ìŠ¤ì¸ StateëŠ” cleanerê°€ ë°©ì„ ì²­ì†Œí•  ë•Œ ìˆ˜ê±°í•  ìì›ë“¤ì„ ë‹´ê³  ìˆë‹¤.
    
    <aside>
    ğŸ’¡ cleaner(ìë°” 8ê¹Œì§€ëŠ” finalizer)ëŠ” ì•ˆì „ë§ ì—­í• ì´ë‚˜ ì¤‘ìš”í•˜ì§€ ì•Šì€ ë„¤ì´í‹°ë¸Œ ìì› íšŒìˆ˜ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ì. ë¬¼ë¡  ì´ëŸ° ê²½ìš°ë¼ë„ ë¶ˆí™•ì‹¤ì„±ê³¼ ì„±ëŠ¥ ì €í•˜ì— ì£¼ì˜í•´ì•¼ í•œë‹¤.
    
    </aside>
    

---

- try-finallyë³´ë‹¤ëŠ” try-with-resourcesë¥¼ ì‚¬ìš©í•˜ë¼
    
    ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” close ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ì§ì ‘ ë‹«ì•„ì¤˜ì•¼ í•˜ëŠ” ìì›ì´ ë§ë‹¤.
    
    InputStream, OutputStream, java.sql.Connection ë“±ì´ ì¢‹ì€ ì˜ˆë‹¤.
    
    ìƒë‹¹ìˆ˜ê°€ ì•ˆì „ë§ìœ¼ë¡œ finalizerë¥¼ í™œìš©í•˜ê³  ìˆì§€ë§Œ finalizerëŠ” ê·¸ë¦¬ ë¯¿ì„ë§Œí•˜ì§€ ëª»í•˜ë‹¤.
    
    ```java
    static String firstLineOfFile(String path) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader(path));
        try {
            return br.readLine();
        } finally {
            br.close();
        }
    }
    ```
    
    ë‚˜ì˜ì§€ ì•Šì§€ë§Œ, ìì›ì„ í•˜ë‚˜ ë” ì‚¬ìš©í•œë‹¤ë©´ ì–´ë–»ê¹Œ?
    
    ```java
    static void copy(String src, String dst) throws IOException {
        InputStream in = new FileInputStream(src);
        try {
            FileOutputStream out = new FileOutputStream(dst);
            try {
                byte[] buf = new byte[BUFFER_SIZE];
                int n;
                while ((n = in.read(buf)) >= 0) out.write(buf, 0, n);
            } finally {
                out.close();
            }
        } finally {
            in.close();
        }
    }
    ```
    
    > í•´ê²°
    > 
    
    ë‹«ì•„ì•¼ í•˜ëŠ” ìì›ì„ ëœ»í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•œë‹¤ë©´ AutoCloseableì„ ë°˜ë“œì‹œ êµ¬í˜„í•˜ê¸° ë°”ë€ë‹¤.
    
    ```java
    static String firstLineOfFile2(String path) throws IOException {
        try (BufferedReader br = new BufferedReader(new FileReader(path))) {
            return br.readLine();
        }
    }
    ```
    
    ```java
    static void copy2(String src, String dst) throws IOException {
        try (InputStream in = new FileInputStream(src); OutputStream out = new FileOutputStream(dst)) {
            byte[] buf = new byte[BUFFER_SIZE];
            int n;
            while ((n = in.read(buf)) >= 0) out.write(buf, 0, n);
        }
    }
    ```
    
    ì‹¤ì „ì—ì„œëŠ” í”„ë¡œê·¸ë˜ë¨¸ì—ê²Œ ë³´ì—¬ì¤„ ì˜ˆì™¸ í•˜ë‚˜ë§Œ ë³´ì¡´ë˜ê³  ì—¬ëŸ¬ ê°œì˜ ë‹¤ë¥¸ ì˜ˆì™¸ê°€ ìˆ¨ê²¨ì§ˆ ìˆ˜ë„ ìˆë‹¤.
    
    ìë°” 7ì—ì„œ Throwableì— ì¶”ê°€ëœ getSuppressed ë©”ì„œë“œë¥¼ ì´ìš©í•˜ë©´ í”„ë¡œê·¸ë¨ ì½”ë“œì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ë„ ìˆë‹¤.
    
    ë³´í†µì˜ try-finallyì—ì„œì²˜ëŸ¼ try-with-resourcesì—ì„œë„ catch ì ˆì„ ì“¸ ìˆ˜ ìˆë‹¤. 
    
    catch ì ˆ ë•ë¶„ì— try ë¬¸ì„ ë” ì¤‘ì²©í•˜ì§€ ì•Šê³ ë„ ë‹¤ìˆ˜ì˜ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
    
    ```java
    static String firstLineOfFile3(String path, String defaultVal) {
        try (BufferedReader br = new BufferedReader(new FileReader(path))) {
            return br.readLine();
        } catch (IOException e) {
            return defaultVal;
        }
    }
    ```
    
    <aside>
    ğŸ’¡ ê¼­ íšŒìˆ˜í•´ì•¼ í•˜ëŠ” ìì›ì„ ë‹¤ë£° ë•ŒëŠ” try-finally ë§ê³ , try-with-resourcesë¥¼ ì‚¬ìš©í•˜ì.
    ì˜ˆì™¸ëŠ” ì—†ë‹¤. ì½”ë“œëŠ” ë” ì§§ê³  ë¶„ëª…í•´ì§€ê³ , ë§Œë“¤ì–´ì§€ëŠ” ì˜ˆì™¸ ì •ë³´ê³  í›¨ì”¬ ìœ ìš©í•˜ë‹¤.
    try-fianllyë¡œ ì‘ì„±í•˜ë©´ ì‹¤ìš©ì ì´ì§€ ëª»í•  ë§Œí¼ ì½”ë“œê°€ ì§€ì €ë¶„í•´ì§€ëŠ” ê²½ìš°ë¼ë„, try-with-resourcesë¡œëŠ” 
    ì •í™•í•˜ê³  ì‰½ê²Œ ìì›ì„ íšŒìˆ˜í•  ìˆ˜ ìˆë‹¤.
    
    </aside>
    

---